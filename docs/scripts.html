<!DOCTYPE html>
<html class="writer-html5" lang="English" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>scripts &mdash; ExpRoLab_Assignment2 v.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="utilities" href="utilities.html" />
    <link rel="prev" title="Welcome to ExpRoLab_Assignment2&#39;s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> ExpRoLab_Assignment2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.behavior">Behavior Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scripts.behavior.CheckTarget"><code class="docutils literal notranslate"><span class="pre">CheckTarget</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts.behavior.CheckTarget.execute"><code class="docutils literal notranslate"><span class="pre">CheckTarget.execute()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scripts.behavior.DecideTarget"><code class="docutils literal notranslate"><span class="pre">DecideTarget</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts.behavior.DecideTarget.execute"><code class="docutils literal notranslate"><span class="pre">DecideTarget.execute()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scripts.behavior.LoadOntology"><code class="docutils literal notranslate"><span class="pre">LoadOntology</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts.behavior.LoadOntology.execute"><code class="docutils literal notranslate"><span class="pre">LoadOntology.execute()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scripts.behavior.Recharging"><code class="docutils literal notranslate"><span class="pre">Recharging</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts.behavior.Recharging.execute"><code class="docutils literal notranslate"><span class="pre">Recharging.execute()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scripts.behavior.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.interface_helper">Interface Helper Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scripts.interface_helper.ActionClientHelper"><code class="docutils literal notranslate"><span class="pre">ActionClientHelper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.ActionClientHelper.cancel_goals"><code class="docutils literal notranslate"><span class="pre">ActionClientHelper.cancel_goals()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.ActionClientHelper.done_callback_"><code class="docutils literal notranslate"><span class="pre">ActionClientHelper.done_callback_()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.ActionClientHelper.feedback_callback_"><code class="docutils literal notranslate"><span class="pre">ActionClientHelper.feedback_callback_()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.ActionClientHelper.get_results"><code class="docutils literal notranslate"><span class="pre">ActionClientHelper.get_results()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.ActionClientHelper.is_done"><code class="docutils literal notranslate"><span class="pre">ActionClientHelper.is_done()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.ActionClientHelper.is_running"><code class="docutils literal notranslate"><span class="pre">ActionClientHelper.is_running()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.ActionClientHelper.reset_client_states"><code class="docutils literal notranslate"><span class="pre">ActionClientHelper.reset_client_states()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.ActionClientHelper.send_goal"><code class="docutils literal notranslate"><span class="pre">ActionClientHelper.send_goal()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scripts.interface_helper.InterfaceHelper"><code class="docutils literal notranslate"><span class="pre">InterfaceHelper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.InterfaceHelper.battery_callback_"><code class="docutils literal notranslate"><span class="pre">InterfaceHelper.battery_callback_()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.InterfaceHelper.create_move_base_goal"><code class="docutils literal notranslate"><span class="pre">InterfaceHelper.create_move_base_goal()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.InterfaceHelper.init_robot_pose"><code class="docutils literal notranslate"><span class="pre">InterfaceHelper.init_robot_pose()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.InterfaceHelper.is_battery_low"><code class="docutils literal notranslate"><span class="pre">InterfaceHelper.is_battery_low()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.InterfaceHelper.list_callback_"><code class="docutils literal notranslate"><span class="pre">InterfaceHelper.list_callback_()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.interface_helper.InterfaceHelper.reset_states"><code class="docutils literal notranslate"><span class="pre">InterfaceHelper.reset_states()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.fsm_helper">FSM Helper Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper.check_location"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper.check_location()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper.clean_list"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper.clean_list()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper.decide_location"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper.decide_location()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper.get_queried"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper.get_queried()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper.get_timestamp"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper.get_timestamp()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper.look_around"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper.look_around()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper.reason_reach"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper.reason_reach()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper.reason_urg"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper.reason_urg()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.fsm_helper.BehaviorHelper.recharge"><code class="docutils literal notranslate"><span class="pre">BehaviorHelper.recharge()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.robot_states">Robot States Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scripts.robot_states.RobotState"><code class="docutils literal notranslate"><span class="pre">RobotState</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts.robot_states.RobotState.battery_notifier_"><code class="docutils literal notranslate"><span class="pre">RobotState.battery_notifier_()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.robot_states.RobotState.get_pose"><code class="docutils literal notranslate"><span class="pre">RobotState.get_pose()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.robot_states.RobotState.is_battery_low_"><code class="docutils literal notranslate"><span class="pre">RobotState.is_battery_low_()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.robot_states.RobotState.odometry_cb"><code class="docutils literal notranslate"><span class="pre">RobotState.odometry_cb()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripts.robot_states.RobotState.set_pose"><code class="docutils literal notranslate"><span class="pre">RobotState.set_pose()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.load_ontology">Load Ontology Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scripts.load_ontology.LoadMapService"><code class="docutils literal notranslate"><span class="pre">LoadMapService</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts.load_ontology.LoadMapService.handle_load_map"><code class="docutils literal notranslate"><span class="pre">LoadMapService.handle_load_map()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#detect-marker-module">Detect Marker Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#marker-server-module">Marker Server Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">utilities</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ExpRoLab_Assignment2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">scripts</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/scripts.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="scripts">
<h1>scripts<a class="headerlink" href="#scripts" title="Permalink to this heading"></a></h1>
<div class="section" id="module-scripts.behavior">
<span id="behavior-module"></span><h2>Behavior Module<a class="headerlink" href="#module-scripts.behavior" title="Permalink to this heading"></a></h2>
<span class="target" id="module-behavior"></span><p>This module defines the behavior of the Finite State Machine. It has two states and one inner FSM:</p>
<ul class="simple">
<li><p>Initialization state: the ontology is created;</p></li>
<li><p>Recharging state: the robot goes to recharge;</p></li>
<li><p>Normal: inner FSM with two states, Decision state and Checking state, to decide what location to visit next and to check it.</p></li>
</ul>
<dl class="simple">
<dt>Servers:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">fsm_server</span></code>: introspection server of SMACH, necessary for the developer to visualize the state machine</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.behavior.CheckTarget">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.behavior.</span></span><span class="sig-name descname"><span class="pre">CheckTarget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sm_helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/behavior.html#CheckTarget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.behavior.CheckTarget" title="Permalink to this definition"></a></dt>
<dd><p>Class related to the state that checks the location the robot is in.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.behavior.CheckTarget.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/behavior.html#CheckTarget.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.behavior.CheckTarget.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the fsm enters the CHECK_TARGET state.
It makes the robot go to the wanted location and check it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> -- used to pass data between states of the FSM</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>'recharging' if the battery is low, 'went_target' otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scripts.behavior.DecideTarget">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.behavior.</span></span><span class="sig-name descname"><span class="pre">DecideTarget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sm_helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/behavior.html#DecideTarget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.behavior.DecideTarget" title="Permalink to this definition"></a></dt>
<dd><p>Class related to the state that reasons about the next location that the robot will check.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.behavior.DecideTarget.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/behavior.html#DecideTarget.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.behavior.DecideTarget.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the fsm enters the DECIDE_LOCATION state.
It decides in which location to go next based on some criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> -- used to pass data between states of the FSM</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>'recharging' if the battery is low, 'target_acquired' otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scripts.behavior.LoadOntology">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.behavior.</span></span><span class="sig-name descname"><span class="pre">LoadOntology</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/behavior.html#LoadOntology"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.behavior.LoadOntology" title="Permalink to this definition"></a></dt>
<dd><p>Class related to the state that loads the ontology.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.behavior.LoadOntology.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/behavior.html#LoadOntology.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.behavior.LoadOntology.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed when entering the INITIALIZE_MAP state of the fsm.
It calls the detecter of the markers and waits for the map to be built, then it transitions to the state NORMAL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> -- not used</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>'everything_loaded' once the map has been intialized</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scripts.behavior.Recharging">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.behavior.</span></span><span class="sig-name descname"><span class="pre">Recharging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/behavior.html#Recharging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.behavior.Recharging" title="Permalink to this definition"></a></dt>
<dd><p>Class related to the state that recharges the robot's battery.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.behavior.Recharging.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/behavior.html#Recharging.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.behavior.Recharging.execute" title="Permalink to this definition"></a></dt>
<dd><p>Function that is executed every time the fsm enters the RECHARGING state.
It recharges the battery of the robot and transitions to the state NORMAL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>userdata</strong> -- not used</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>'recharged' once the battery is recharged</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.behavior.main">
<span class="sig-prename descclassname"><span class="pre">scripts.behavior.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/behavior.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.behavior.main" title="Permalink to this definition"></a></dt>
<dd><p>Main function which initalizes the Finite State Machine node 'behavior'.
Two helpers are defined to help the state machine take decisions and to manage the battery.
The fsm is hierarchical as to create a more modular and robust architecture.</p>
</dd></dl>

</div>
<div class="section" id="module-scripts.interface_helper">
<span id="interface-helper-module"></span><h2>Interface Helper Module<a class="headerlink" href="#module-scripts.interface_helper" title="Permalink to this heading"></a></h2>
<span class="target" id="module-interface_helper"></span><p>This module implements two classes representing two different helpers: one to simplify the implementation of a client for ROS action servers and
one that manages the synchronization with subscribers and action servers. and one to help the fsm machine taking decisions.</p>
<dl>
<dt>Subscribes to:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">state/battery_low</span></code>: where the state of the battery (high/low) is published</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">id_list</span></code>: where the list with the markers' ID is published</p>
</dd>
<dt>Servers:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">state/set_pose</span></code>: server to set the current robot pose, stored in the 'robot_state' node</p>
</dd>
<dt>Clients:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">move_base</span></code>: client to communicate with move_base in order for the robot to move in the simulation</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.interface_helper.ActionClientHelper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.interface_helper.</span></span><span class="sig-name descname"><span class="pre">ActionClientHelper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">service_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">done_callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feedback_callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mutex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#ActionClientHelper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.ActionClientHelper" title="Permalink to this definition"></a></dt>
<dd><p>Class that simplifies the implementation of a client for ROS action servers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.ActionClientHelper.cancel_goals">
<span class="sig-name descname"><span class="pre">cancel_goals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#ActionClientHelper.cancel_goals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.ActionClientHelper.cancel_goals" title="Permalink to this definition"></a></dt>
<dd><p>Fucntion to stop the computation of the action server, only if it is actually computing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.ActionClientHelper.done_callback_">
<span class="sig-name descname"><span class="pre">done_callback_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#ActionClientHelper.done_callback_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.ActionClientHelper.done_callback_" title="Permalink to this definition"></a></dt>
<dd><p>Function called when the action server has finished its computation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>status</strong> -- status of the action server</p></li>
<li><p><strong>results</strong> -- results from the action server</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.ActionClientHelper.feedback_callback_">
<span class="sig-name descname"><span class="pre">feedback_callback_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feedback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#ActionClientHelper.feedback_callback_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.ActionClientHelper.feedback_callback_" title="Permalink to this definition"></a></dt>
<dd><p>Function called when the action server has to send a feedback to the client.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>feedback</strong> -- feedback message to be sent to the client</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.ActionClientHelper.get_results">
<span class="sig-name descname"><span class="pre">get_results</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#ActionClientHelper.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.ActionClientHelper.get_results" title="Permalink to this definition"></a></dt>
<dd><p>Function that gets the result of the action server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Result of the action server, if any, 'None' otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.ActionClientHelper.is_done">
<span class="sig-name descname"><span class="pre">is_done</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#ActionClientHelper.is_done"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.ActionClientHelper.is_done" title="Permalink to this definition"></a></dt>
<dd><p>Function returning whether the action server finished its computation or not. This method should be mutex safe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>'True' if the action server finished its computation, 'False' otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.ActionClientHelper.is_running">
<span class="sig-name descname"><span class="pre">is_running</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#ActionClientHelper.is_running"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.ActionClientHelper.is_running" title="Permalink to this definition"></a></dt>
<dd><p>Function returning whether the action server is running or not. This method should be mutex safe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>True</cite> if the action server is running, <cite>False</cite> otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.ActionClientHelper.reset_client_states">
<span class="sig-name descname"><span class="pre">reset_client_states</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#ActionClientHelper.reset_client_states"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.ActionClientHelper.reset_client_states" title="Permalink to this definition"></a></dt>
<dd><p>Function to reset the client state variables stored in this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.ActionClientHelper.send_goal">
<span class="sig-name descname"><span class="pre">send_goal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">goal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#ActionClientHelper.send_goal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.ActionClientHelper.send_goal" title="Permalink to this definition"></a></dt>
<dd><p>Function to send the action server a new goal only if it is not running; the server can be used only by one client at a time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>goal</strong> -- goal to be sent made up of two Points, start and target in (x, y) coordinates</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scripts.interface_helper.InterfaceHelper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.interface_helper.</span></span><span class="sig-name descname"><span class="pre">InterfaceHelper</span></span><a class="reference internal" href="_modules/scripts/interface_helper.html#InterfaceHelper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.InterfaceHelper" title="Permalink to this definition"></a></dt>
<dd><p>Class that manages the synchronization with subscribers and action servers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.InterfaceHelper.battery_callback_">
<span class="sig-name descname"><span class="pre">battery_callback_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#InterfaceHelper.battery_callback_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.InterfaceHelper.battery_callback_" title="Permalink to this definition"></a></dt>
<dd><p>Function for the subscriber to get messages published from the <cite>robot_state</cite> node into the <cite>/state/battery_low/</cite> topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>Bool</em>) -- status of the battery</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.InterfaceHelper.create_move_base_goal">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_move_base_goal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">room</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#InterfaceHelper.create_move_base_goal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.InterfaceHelper.create_move_base_goal" title="Permalink to this definition"></a></dt>
<dd><p>Function used to create the goal to send to the /move_base Action Client</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>room</strong> (<em>Point</em>) -- (x,y) coordinates of the room the robot has to reach</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>goal that will be sent to move_base</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>goal(MoveBaseGoal)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.InterfaceHelper.init_robot_pose">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">init_robot_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#InterfaceHelper.init_robot_pose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.InterfaceHelper.init_robot_pose" title="Permalink to this definition"></a></dt>
<dd><p>Function to update the current position of the robot stored in the 'robot_state' node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>point</strong> (<em>Point</em>) -- point representing the robot pose in (x, y) coordinates</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.InterfaceHelper.is_battery_low">
<span class="sig-name descname"><span class="pre">is_battery_low</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#InterfaceHelper.is_battery_low"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.InterfaceHelper.is_battery_low" title="Permalink to this definition"></a></dt>
<dd><p>Fucntion to get the state variable encoded in this class about the battery level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>True</cite> if the battery is low, <cite>False</cite> otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.InterfaceHelper.list_callback_">
<span class="sig-name descname"><span class="pre">list_callback_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#InterfaceHelper.list_callback_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.InterfaceHelper.list_callback_" title="Permalink to this definition"></a></dt>
<dd><p>Callback of the subscriber to get messages published from the <cite>detect_marker</cite> node into the <cite>/id_list</cite> topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>List</em>) -- list of found markers</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.interface_helper.InterfaceHelper.reset_states">
<span class="sig-name descname"><span class="pre">reset_states</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/interface_helper.html#InterfaceHelper.reset_states"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.interface_helper.InterfaceHelper.reset_states" title="Permalink to this definition"></a></dt>
<dd><p>Function to reset the stimulus for the battery stored as state variable.
This function assumes that no states of the Finite State Machine run concurrently.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.fsm_helper">
<span id="fsm-helper-module"></span><h2>FSM Helper Module<a class="headerlink" href="#module-scripts.fsm_helper" title="Permalink to this heading"></a></h2>
<span class="target" id="module-fsm_helper"></span><p>This module implements one class representing an helper to help the fsm taking decisions.</p>
<dl>
<dt>Params:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">config/recharge_room</span></code>: name and (x,y) coordinates of the recharging room</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">config/robot</span></code>: name of the robot</p>
</dd>
<dt>Publishes to:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">/robot_assignment/joint1_position_controller/command</span></code>: to move the 1st joint of the robot's arm</p>
</dd>
<dt>Clients:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">armor_client</span></code>: client to communicate with the aRMOR server</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.fsm_helper.</span></span><span class="sig-name descname"><span class="pre">BehaviorHelper</span></span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper" title="Permalink to this definition"></a></dt>
<dd><p>Class that implements some function useful for the fsm to take decisions.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper.check_location">
<span class="sig-name descname"><span class="pre">check_location</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper.check_location"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper.check_location" title="Permalink to this definition"></a></dt>
<dd><p>Function to reach and check the location that the robot has to go to.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> (<em>Str</em>) -- current position of the robot, which has to be updated</p></li>
<li><p><strong>target</strong> (<em>Str</em>) -- location with which to update the robot position</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper.clean_list">
<span class="sig-name descname"><span class="pre">clean_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper.clean_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper.clean_list" title="Permalink to this definition"></a></dt>
<dd><p>Function to clean a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type</strong> (<em>Int</em>) -- value specifying how to clean the string, given that timestamps
and strings indicating locations have a different length</p></li>
<li><p><strong>list</strong> (<em>Str</em>) -- list that has to be cleaned</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cleaned list</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list_(Str)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper.decide_location">
<span class="sig-name descname"><span class="pre">decide_location</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper.decide_location"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper.decide_location" title="Permalink to this definition"></a></dt>
<dd><p>Function to decide in which location the robot will go to next.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>current position of the robot
target(Str): string representing the location in which the robot will go to</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>position(Str)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper.get_queried">
<span class="sig-name descname"><span class="pre">get_queried</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper.get_queried"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper.get_queried" title="Permalink to this definition"></a></dt>
<dd><p>Function to get the queried object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> (<em>Str</em>) -- string representing the object we want to query</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of queried objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataprop</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper.get_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper.get_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Function to get the timestamp for the 'dataprop' property of the 'ind' individual.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataprop</strong> (<em>Str</em>) -- string representing the property for which we want the timestamp</p></li>
<li><p><strong>ind</strong> (<em>Str</em>) -- string representing the individual of interest</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cleaned timestamp of the property of the individual</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper.look_around">
<span class="sig-name descname"><span class="pre">look_around</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper.look_around"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper.look_around" title="Permalink to this definition"></a></dt>
<dd><p>Function to check the location that the robot is into. It is done by rotating the camera of approximately 360 degrees.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper.reason_reach">
<span class="sig-name descname"><span class="pre">reason_reach</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reachable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper.reason_reach"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper.reason_reach" title="Permalink to this definition"></a></dt>
<dd><p>Function to decide in which location to go next. It is called when there are no urgent locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reachable</strong> (<em>Str</em>) -- list of all the reachable locations</p></li>
<li><p><strong>position</strong> (<em>Str</em>) -- string representing the current pose of the robot</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the location in which the robot will go next</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper.reason_urg">
<span class="sig-name descname"><span class="pre">reason_urg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reachable_urg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper.reason_urg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper.reason_urg" title="Permalink to this definition"></a></dt>
<dd><p>Function to decide how to manage the urgent locations. It is called only when there are urgent locations.
The robot goes in the most urgent location, which is the one that has not been visited for the longest time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>reachable_urg</strong> (<em>Str</em>) -- list of all the reachable locations that are urgent</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the location in which the robot will go next</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.fsm_helper.BehaviorHelper.recharge">
<span class="sig-name descname"><span class="pre">recharge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/fsm_helper.html#BehaviorHelper.recharge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.fsm_helper.BehaviorHelper.recharge" title="Permalink to this definition"></a></dt>
<dd><p>Function to recharge the battery. The robot checks the reachable locations: if room E can be reached, then the robot goes there;
if room E is not in the reachable locations, then choose randomly in which location to go next and repeat until room E is reachable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>position</strong> (<em>Str</em>) -- current position of the robot, which whill be updated with location 'E'</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.robot_states">
<span id="robot-states-module"></span><h2>Robot States Module<a class="headerlink" href="#module-scripts.robot_states" title="Permalink to this heading"></a></h2>
<span class="target" id="module-robot_states"></span><p>This node has a class in which two services are defined: one to get the current robot pose and one to set it.
Also, the class defines a publisher to notify that the battery is low.</p>
<dl>
<dt>Params:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">config/recharge_room</span></code>: name and (x,y) coordinates of the recharging room</p>
</dd>
<dt>Publishes to:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">state/battery_low</span></code> the state of the battery (high/low)</p>
</dd>
<dt>Subscribes to:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">/odom</span></code> the position of the robot</p>
</dd>
<dt>Servers:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">state/set_pose</span></code>: server to set the current robot pose</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">state/get_pose</span></code>: server to get the current robot pose</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.robot_states.RobotState">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.robot_states.</span></span><span class="sig-name descname"><span class="pre">RobotState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">helper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/robot_states.html#RobotState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.robot_states.RobotState" title="Permalink to this definition"></a></dt>
<dd><p>Class implementing the services of the robot position and the publisher for the battery level.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.robot_states.RobotState.battery_notifier_">
<span class="sig-name descname"><span class="pre">battery_notifier_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">publisher</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/robot_states.html#RobotState.battery_notifier_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.robot_states.RobotState.battery_notifier_" title="Permalink to this definition"></a></dt>
<dd><p>Function that publishes when the battery changes state (high/low) based on a constant delay.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>publisher</strong> (<em>Publisher</em>) -- publisher for the message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.robot_states.RobotState.get_pose">
<span class="sig-name descname"><span class="pre">get_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/robot_states.html#RobotState.get_pose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.robot_states.RobotState.get_pose" title="Permalink to this definition"></a></dt>
<dd><p>Function implementing the 'state/get_pose' service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> -- given by the client as empty, it is not used</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>current robot position</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>response(Point)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.robot_states.RobotState.is_battery_low_">
<span class="sig-name descname"><span class="pre">is_battery_low_</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/robot_states.html#RobotState.is_battery_low_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.robot_states.RobotState.is_battery_low_" title="Permalink to this definition"></a></dt>
<dd><p>Fucntion that publishes the changes of the battery level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> -- </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.robot_states.RobotState.odometry_cb">
<span class="sig-name descname"><span class="pre">odometry_cb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/robot_states.html#RobotState.odometry_cb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.robot_states.RobotState.odometry_cb" title="Permalink to this definition"></a></dt>
<dd><p>Function implementing the callback of the subscriber to the /odom topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>Odometry</em>) -- pose of the robot</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scripts.robot_states.RobotState.set_pose">
<span class="sig-name descname"><span class="pre">set_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/robot_states.html#RobotState.set_pose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.robot_states.RobotState.set_pose" title="Permalink to this definition"></a></dt>
<dd><p>Function implementing the 'state/set_pose' service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>Point</em>) -- current robot position to be set</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>empty response</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>SetPoseResponse()</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripts.load_ontology">
<span id="load-ontology-module"></span><h2>Load Ontology Module<a class="headerlink" href="#module-scripts.load_ontology" title="Permalink to this heading"></a></h2>
<span class="target" id="module-load_ontology"></span><p>This node adds all the wanted individuals in the map and their properties and it creates all the connections based on user inputs.</p>
<dl>
<dt>Params:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">config/recharge_room</span></code>: name and (x,y) coordinates of the recharging room</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">config/robot</span></code>: name of the robot</p>
</dd>
<dt>Clients:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">armor_client</span></code>: client to communicate with the aRMOR server in order to create the ontology.</p>
</dd>
<dt>Services:</dt><dd><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">load_map</span></code>: service to build the ontology</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.load_ontology.LoadMapService">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.load_ontology.</span></span><span class="sig-name descname"><span class="pre">LoadMapService</span></span><a class="reference internal" href="_modules/scripts/load_ontology.html#LoadMapService"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.load_ontology.LoadMapService" title="Permalink to this definition"></a></dt>
<dd><p>Class to build the ontology.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.load_ontology.LoadMapService.handle_load_map">
<span class="sig-name descname"><span class="pre">handle_load_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/load_ontology.html#LoadMapService.handle_load_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.load_ontology.LoadMapService.handle_load_map" title="Permalink to this definition"></a></dt>
<dd><p>Function that is called every time the server /load_map receives a request. It gathers information about one room thorugh the
service /room_info and then manipulates the ontology with the received information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>Int</em>) -- ID of a marker</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>response(RoomCoordinate)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="detect-marker-module">
<h2>Detect Marker Module<a class="headerlink" href="#detect-marker-module" title="Permalink to this heading"></a></h2>
<p>Node which moves the arm of the robot to detect the ArCo markers in the environment. </p>
<p>
Subscribes to: <code class="docutils literal notranslate"><span class="pre">/robot_assignment/camera1/image_raw</span></code> topic to get the robot vision through the camera mounted on the arm of the robot<dl class="simple">
<dt><strong>Author</strong></dt><dd><p>Sara Sgambato </p>
</dd>
<dt><strong>Version</strong></dt><dd><p>1.0 </p>
</dd>
<dt><strong>Date</strong></dt><dd><p>04/02/2023</p>
</dd>
</dl>
</p>
<p>Publishes to: </p>
<p><code class="docutils literal notranslate"><span class="pre">/robot_assignment/joint1_position_controller/command</span></code> topic of the 1st joint of the robot's arm</p>
<p><code class="docutils literal notranslate"><span class="pre">/robot_assignment/joint2_position_controller/command</span></code> topic of the 2nd joint of the robot's arm</p>
<p><code class="docutils literal notranslate"><span class="pre">/robot_assignment/joint3_position_controller/command</span></code> topic of the 3rd joint of the robot's arm</p>
<p><code class="docutils literal notranslate"><span class="pre">/id_list</span></code> topic in which all the markers' ID are published</p>
<p>Description: The node is used to detect the AruCo markers that are in the environment. The joints of the robot's arm are moved via the respective topic detect the 7 markers around itself, first on the floor and then on the walls, and once all markers have been detected their ID are published as a list. </p>
<dl class="field-list simple">
<dt class="field-odd">param floor_markers</dt>
<dd class="field-odd"><p><strong>[in]</strong> number of markers on the floor. </p>
</dd>
<dt class="field-even">param ceil_markers</dt>
<dd class="field-even"><p><strong>[in]</strong> number of markers on the top of the walls.</p>
</dd>
</dl>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv44mainiPPc">
<span id="_CPPv34mainiPPc"></span><span id="_CPPv24mainiPPc"></span><span id="main__i.cPP"></span><span class="target" id="detect__marker_8cpp_1a3c04138a5bfe5d72780bb7e82a18e627"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">main</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">argc</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">argv</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv44mainiPPc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Main function. </p>
<p>
In the main function the robot's arm is moved until all markers have been detected. Every time the arm is moved, it stays in position for 0.6 seconds. Once all markers have been detected, the list with the IDs is published. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>argc</strong> -- number of command line arguments </p></li>
<li><p><strong>argv</strong> -- array of command line arguments</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if success, non-zero otherwise</p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv411DetectAruco">
<span id="_CPPv311DetectAruco"></span><span id="_CPPv211DetectAruco"></span><span id="DetectAruco"></span><span class="target" id="class_detect_aruco"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DetectAruco</span></span></span><a class="headerlink" href="#_CPPv411DetectAruco" title="Permalink to this definition"></a><br /></dt>
<dd><p>Class to detect the AruCo markers in the environment. </p>
<p>This class subscribes to the topic relative to what the robot is seeing and it publishes the joints' positions in order for the robot arm to move, and once a marker has been detected its ID is stored inside a variable. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco11DetectArucoEv">
<span id="_CPPv3N11DetectAruco11DetectArucoEv"></span><span id="_CPPv2N11DetectAruco11DetectArucoEv"></span><span id="DetectAruco::DetectAruco"></span><span class="target" id="class_detect_aruco_1ae8cc6ad4b5d55a4c8dd77560b8ebfc0b"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DetectAruco</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11DetectAruco11DetectArucoEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Constructor of the <a class="reference internal" href="#class_detect_aruco"><span class="std std-ref">DetectAruco</span></a> class. </p>
<p>In the constructor the publishers and the subscriber are initialized. Also, The constructor takes two parameter relative to the AruCo markers in the environment, the ones on the floor and the ones on the top of the walls. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco14CameraCallbackERKN11sensor_msgs5Image8ConstPtrE">
<span id="_CPPv3N11DetectAruco14CameraCallbackERKN11sensor_msgs5Image8ConstPtrE"></span><span id="_CPPv2N11DetectAruco14CameraCallbackERKN11sensor_msgs5Image8ConstPtrE"></span><span id="DetectAruco::CameraCallback__sensor_msgs::Image::ConstPtrCR"></span><span class="target" id="class_detect_aruco_1aa5b90097c9ae2b2f7203ed14b7399cd2"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CameraCallback</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">sensor_msgs</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Image</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">ConstPtr</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">msg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11DetectAruco14CameraCallbackERKN11sensor_msgs5Image8ConstPtrE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback of the subscriber to the /robot_assignment/camera1/image_raw topic. </p>
<p>
In this callback the image is processed to see whether there are some markers. If some markers are detected, and they have not been detected before, their IDs are saved into a variable. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> -- image received</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco7MoveArmEf">
<span id="_CPPv3N11DetectAruco7MoveArmEf"></span><span id="_CPPv2N11DetectAruco7MoveArmEf"></span><span id="DetectAruco::MoveArm__float"></span><span class="target" id="class_detect_aruco_1a0bbff1b9155521a56890b4e642a57990"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MoveArm</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">offset</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11DetectAruco7MoveArmEf" title="Permalink to this definition"></a><br /></dt>
<dd><p>Method to move the robot's arm. </p>
<p>
The robot arm is moved firstly to detect all the markers on the floor, then it is moved to detect all the markers on the walls. To do so, the joint responsible of rotating around the z axis is moved every time of &lt;offset&gt; radians, until all markers are detected. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>offset</strong> -- float number</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The test results</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco15FinishDetectionEv">
<span id="_CPPv3N11DetectAruco15FinishDetectionEv"></span><span id="_CPPv2N11DetectAruco15FinishDetectionEv"></span><span id="DetectAruco::FinishDetection"></span><span class="target" id="class_detect_aruco_1aaaa75855c144db1612cc272c5036755f"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FinishDetection</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11DetectAruco15FinishDetectionEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Method to check if all markers have been detected. </p>
<p>
The size of the list containing the IDs of the detected markers is compared with the total number of markers to detect. Once all markers have been detected, the robot's arm is put back to its initial position. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>true if all markers have been detected, false otherwise</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco6IDListE">
<span id="_CPPv3N11DetectAruco6IDListE"></span><span id="_CPPv2N11DetectAruco6IDListE"></span><span id="DetectAruco::IDList__std_msgs::Int32MultiArray"></span><span class="target" id="class_detect_aruco_1ab0a44c534a0250002d9a4a27922b093f"></span><span class="n"><span class="pre">std_msgs</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Int32MultiArray</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">IDList</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco6IDListE" title="Permalink to this definition"></a><br /></dt>
<dd><p>message to send the list of IDs </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco8markerIDE">
<span id="_CPPv3N11DetectAruco8markerIDE"></span><span id="_CPPv2N11DetectAruco8markerIDE"></span><span id="DetectAruco::markerID__std::vector:i:"></span><span class="target" id="class_detect_aruco_1a354268cd82f349439774e5c025a9a189"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">markerID</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco8markerIDE" title="Permalink to this definition"></a><br /></dt>
<dd><p>vector of IDs of the markers </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco6ID_pubE">
<span id="_CPPv3N11DetectAruco6ID_pubE"></span><span id="_CPPv2N11DetectAruco6ID_pubE"></span><span id="DetectAruco::ID_pub__ros::Publisher"></span><span class="target" id="class_detect_aruco_1adc0fda17c72acd5ea3f794c836acce2d"></span><span class="n"><span class="pre">ros</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Publisher</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ID_pub</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco6ID_pubE" title="Permalink to this definition"></a><br /></dt>
<dd><p>ROS publisher to the list topic </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco12current_poseE">
<span id="_CPPv3N11DetectAruco12current_poseE"></span><span id="_CPPv2N11DetectAruco12current_poseE"></span><span id="DetectAruco::current_pose__float"></span><span class="target" id="class_detect_aruco_1aa7289f7a992fc1d5725ed902d732b909"></span><span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">current_pose</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N11DetectAruco12current_poseE" title="Permalink to this definition"></a><br /></dt>
<dd><p>current position of the robot's 1st joint </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco2nhE">
<span id="_CPPv3N11DetectAruco2nhE"></span><span id="_CPPv2N11DetectAruco2nhE"></span><span id="DetectAruco::nh__ros::NodeHandle"></span><span class="target" id="class_detect_aruco_1a39b9799135fd1370949d49ccd97c1068"></span><span class="n"><span class="pre">ros</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">NodeHandle</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nh</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco2nhE" title="Permalink to this definition"></a><br /></dt>
<dd><p>ROS node handle </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco11joint01_pubE">
<span id="_CPPv3N11DetectAruco11joint01_pubE"></span><span id="_CPPv2N11DetectAruco11joint01_pubE"></span><span id="DetectAruco::joint01_pub__ros::Publisher"></span><span class="target" id="class_detect_aruco_1a1bdcbff2983f1c36684b8ca50b36fd4c"></span><span class="n"><span class="pre">ros</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Publisher</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">joint01_pub</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco11joint01_pubE" title="Permalink to this definition"></a><br /></dt>
<dd><p>ROS publisher to the 1st joint of the robot's arm </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco11joint02_pubE">
<span id="_CPPv3N11DetectAruco11joint02_pubE"></span><span id="_CPPv2N11DetectAruco11joint02_pubE"></span><span id="DetectAruco::joint02_pub__ros::Publisher"></span><span class="target" id="class_detect_aruco_1ac60d35ee13222f3dc1288c4f83d01f4b"></span><span class="n"><span class="pre">ros</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Publisher</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">joint02_pub</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco11joint02_pubE" title="Permalink to this definition"></a><br /></dt>
<dd><p>ROS publisher to the 2nd joint of the robot's arm </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco11joint03_pubE">
<span id="_CPPv3N11DetectAruco11joint03_pubE"></span><span id="_CPPv2N11DetectAruco11joint03_pubE"></span><span id="DetectAruco::joint03_pub__ros::Publisher"></span><span class="target" id="class_detect_aruco_1a56aad7577f948a09c59f714c13435934"></span><span class="n"><span class="pre">ros</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Publisher</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">joint03_pub</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco11joint03_pubE" title="Permalink to this definition"></a><br /></dt>
<dd><p>ROS publisher to the 3rd joint of the robot's arm </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco10camera_subE">
<span id="_CPPv3N11DetectAruco10camera_subE"></span><span id="_CPPv2N11DetectAruco10camera_subE"></span><span id="DetectAruco::camera_sub__ros::Subscriber"></span><span class="target" id="class_detect_aruco_1ae761ff8233e893b4f163ac115212a1de"></span><span class="n"><span class="pre">ros</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Subscriber</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">camera_sub</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco10camera_subE" title="Permalink to this definition"></a><br /></dt>
<dd><p>ROS subscriber to the camera image </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco9mDetectorE">
<span id="_CPPv3N11DetectAruco9mDetectorE"></span><span id="_CPPv2N11DetectAruco9mDetectorE"></span><span id="DetectAruco::mDetector__aruco::MarkerDetector"></span><span class="target" id="class_detect_aruco_1a0c53d3004e10db49516079cb440d8c61"></span><span class="n"><span class="pre">aruco</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">MarkerDetector</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mDetector</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco9mDetectorE" title="Permalink to this definition"></a><br /></dt>
<dd><p>AruCo marker detector </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco7markersE">
<span id="_CPPv3N11DetectAruco7markersE"></span><span id="_CPPv2N11DetectAruco7markersE"></span><span id="DetectAruco::markers__std::vector:aruco::Marker:"></span><span class="target" id="class_detect_aruco_1ac2070f0569ceb7354f43920a46346603"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">aruco</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Marker</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">markers</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco7markersE" title="Permalink to this definition"></a><br /></dt>
<dd><p>vector of AruCo markers </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco13floor_markersE">
<span id="_CPPv3N11DetectAruco13floor_markersE"></span><span id="_CPPv2N11DetectAruco13floor_markersE"></span><span id="DetectAruco::floor_markers__i"></span><span class="target" id="class_detect_aruco_1a535d5945f41a266222a929f9f2a7cf9f"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">floor_markers</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N11DetectAruco13floor_markersE" title="Permalink to this definition"></a><br /></dt>
<dd><p>number of markers on the floor </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco12ceil_markersE">
<span id="_CPPv3N11DetectAruco12ceil_markersE"></span><span id="_CPPv2N11DetectAruco12ceil_markersE"></span><span id="DetectAruco::ceil_markers__i"></span><span class="target" id="class_detect_aruco_1a3b4906303751f204bbc32ffc6ef1ce7d"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ceil_markers</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N11DetectAruco12ceil_markersE" title="Permalink to this definition"></a><br /></dt>
<dd><p>number of markers on the top of the walls </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco10markerSizeE">
<span id="_CPPv3N11DetectAruco10markerSizeE"></span><span id="_CPPv2N11DetectAruco10markerSizeE"></span><span id="DetectAruco::markerSize__i"></span><span class="target" id="class_detect_aruco_1ad1ca106dbe674d4f5f61ace75d67035c"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">markerSize</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0.05</span></span><a class="headerlink" href="#_CPPv4N11DetectAruco10markerSizeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>size of a marker </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N11DetectAruco3msgE">
<span id="_CPPv3N11DetectAruco3msgE"></span><span id="_CPPv2N11DetectAruco3msgE"></span><span id="DetectAruco::msg__std_msgs::Float64"></span><span class="target" id="class_detect_aruco_1acc2caeec414f462401cc57d930668f10"></span><span class="n"><span class="pre">std_msgs</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Float64</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">msg</span></span></span><a class="headerlink" href="#_CPPv4N11DetectAruco3msgE" title="Permalink to this definition"></a><br /></dt>
<dd><p>message to send the joints' positions </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="marker-server-module">
<h2>Marker Server Module<a class="headerlink" href="#marker-server-module" title="Permalink to this heading"></a></h2>
<p>Server to build the map through the markers. </p>
<p>
Services: <code class="docutils literal notranslate"><span class="pre">/room_info</span></code><dl class="simple">
<dt><strong>Author</strong></dt><dd><p>Carmine Recchiuto </p>
</dd>
<dt><strong>Version</strong></dt><dd><p>0.1 </p>
</dd>
<dt><strong>Date</strong></dt><dd><p>27/01/2023</p>
</dd>
</dl>
</p>
<p>Description: This node is a server which generates a response based on the request it receives. The request changes based on the AruCo marker that the robot detects, and the response corresponds to a room with all its connections. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv414markerCallbackRN20ExpRoLab_Assignment215RoomInformation7RequestERN20ExpRoLab_Assignment215RoomInformation8ResponseE">
<span id="_CPPv314markerCallbackRN20ExpRoLab_Assignment215RoomInformation7RequestERN20ExpRoLab_Assignment215RoomInformation8ResponseE"></span><span id="_CPPv214markerCallbackRN20ExpRoLab_Assignment215RoomInformation7RequestERN20ExpRoLab_Assignment215RoomInformation8ResponseE"></span><span id="markerCallback__ExpRoLab_Assignment2::RoomInformation::RequestR.ExpRoLab_Assignment2::RoomInformation::ResponseR"></span><span class="target" id="marker__server_8cpp_1afbe27b73e1c73991343e3427daa88848"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">markerCallback</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">ExpRoLab_Assignment2</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">RoomInformation</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Request</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">req</span></span>, <span class="n"><span class="pre">ExpRoLab_Assignment2</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">RoomInformation</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Response</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">res</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414markerCallbackRN20ExpRoLab_Assignment215RoomInformation7RequestERN20ExpRoLab_Assignment215RoomInformation8ResponseE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback function. </p>
<p>
In this callback function each ID corresponds to a different room. Each time the server receives a request, it gest the ID and sends back the response with the room, its connections, and the doors connecting the room to the connections. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> -- request from the client, the marker's ID </p></li>
<li><p><strong>res</strong> -- response of the server, information about a room</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>true</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="marker__server_8cpp_1a3c04138a5bfe5d72780bb7e82a18e627"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">main</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">argc</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">argv</span></span><span class="sig-paren">)</span><br /></dt>
<dd><p>Main function. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>argc</strong> -- number of command line arguments </p></li>
<li><p><strong>argv</strong> -- array of command line arguments</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if success, non-zero otherwise </p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to ExpRoLab_Assignment2&#39;s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="utilities.html" class="btn btn-neutral float-right" title="utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Sara Sgambato.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>